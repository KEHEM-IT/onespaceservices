<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - One Reach Services</title>
    <link rel="icon" type="image/x-icon" href="https://kehem.com/static/kehem.webp">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Toastify CSS + JS CDN -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0048a7',
                        secondary: '#85ffff',
                        darkPrimary: '#00306e',
                        litePrimary: '#0063e4',
                    },
                    backdropBlur: {
                        xs: '2px',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'bounce-subtle': 'bounceSubtle 2s infinite',
                    }
                }
            }
        }
    </script>

    <script src="main.js"></script>
    <script src="search.js"></script>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center py-8 px-4">
    <main class="w-full max-w-2xl">
        <div class="w-full bg-white shadow-lg rounded-2xl p-8">
            <h1 class="text-3xl font-bold text-center text-primary mb-2">
                One Reach Services
            </h1>
            <p class="text-center text-gray-600 mb-6">Your One Stop Solution for Land, Living, and Lifestyle</p>

            <h2 class="text-xl font-semibold text-gray-700 mb-6 text-center">Contact Us</h2>

            <!-- User Information Display (for logged-in users) -->
            <div id="userInfo" class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg" style="display: none;">
                <h3 class="text-lg font-semibold text-gray-700 mb-3">Your Information</h3>
                <div class="flex items-center space-x-4">
                    <img id="userAvatar" src="" alt="Profile"
                        class="w-16 h-16 rounded-full object-cover border-2 border-primary">
                    <div class="flex-1">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                            <div><strong>Name:</strong> <span id="userName"></span></div>
                            <div><strong>Email:</strong> <span id="userEmail"></span></div>
                            <div><strong>Phone:</strong> <span id="userPhone"></span></div>
                            <div><strong>Location:</strong> <span id="userLocation"></span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guest User Form (for non-logged-in users) -->
            <div id="guestUserSection" class="mb-6" style="display: none;">
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Left Column: User Registration Info -->
                    <div class="bg-gray-50 p-4 rounded-lg border">
                        <h3 class="text-lg font-semibold text-gray-700 mb-3">Your Information</h3>
                        <div class="space-y-3">
                            <!-- Name -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Full Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="guestName" required placeholder="Enter your full name"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>

                            <!-- Email -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Email Address <span class="text-red-500">*</span>
                                </label>
                                <input type="email" id="guestEmail" required placeholder="Enter your email"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>

                            <!-- Phone -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Phone Number <span class="text-red-500">*</span>
                                </label>
                                <input type="tel" id="guestPhone" required placeholder="Enter your phone"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>

                            <!-- Date of Birth -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Date of Birth <span class="text-red-500">*</span>
                                </label>
                                <input type="date" id="guestDate" required
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>

                            <!-- Division -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Division <span class="text-red-500">*</span>
                                </label>
                                <select id="guestDivision" required
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="">Select Division</option>
                                    <option value="dhaka">Dhaka</option>
                                    <option value="chattogram">Chattogram</option>
                                    <option value="rajshahi">Rajshahi</option>
                                    <option value="khulna">Khulna</option>
                                    <option value="barishal">Barishal</option>
                                    <option value="sylhet">Sylhet</option>
                                    <option value="rangpur">Rangpur</option>
                                    <option value="mymensingh">Mymensingh</option>
                                </select>
                            </div>

                            <!-- District -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    District <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="guestDistrict" required placeholder="Enter your district"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>

                            <!-- Area -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Area <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="guestArea" required placeholder="Enter your area"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Contact Details -->
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h3 class="text-lg font-semibold text-gray-700 mb-3">Contact Details</h3>
                        <div class="space-y-3">
                            <!-- Service Interest -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Service Interest <span class="text-red-500">*</span>
                                </label>
                                <select id="guestService" required
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="">Select a service</option>
                                    <option value="land-purchase">Land Purchase</option>
                                    <option value="property-rental">Property Rental</option>
                                    <option value="property-sale">Property Sale</option>
                                    <option value="property-management">Property Management</option>
                                    <option value="real-estate-consultation">Real Estate Consultation</option>
                                    <option value="investment-advice">Investment Advice</option>
                                    <option value="legal-documentation">Legal Documentation</option>
                                    <option value="property-valuation">Property Valuation</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <!-- Budget Range -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Budget Range (BDT)
                                </label>
                                <select id="guestBudget"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="">Select budget (optional)</option>
                                    <option value="under-10lac">Under 10 Lac</option>
                                    <option value="10lac-25lac">10 Lac - 25 Lac</option>
                                    <option value="25lac-50lac">25 Lac - 50 Lac</option>
                                    <option value="50lac-1crore">50 Lac - 1 Crore</option>
                                    <option value="1crore-2crore">1 Crore - 2 Crore</option>
                                    <option value="above-2crore">Above 2 Crore</option>
                                </select>
                            </div>

                            <!-- Message -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Message/Comments <span class="text-red-500">*</span>
                                </label>
                                <textarea id="guestMessage" required rows="4"
                                    placeholder="Describe your requirements..."
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-vertical"></textarea>
                            </div>

                            <!-- Preferred Contact Time -->
                            <div>
                                <label class="block text-gray-600 mb-1 text-sm">
                                    Preferred Contact Time
                                </label>
                                <select id="guestContactTime"
                                    class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="">Select time (optional)</option>
                                    <option value="morning">Morning (9 AM - 12 PM)</option>
                                    <option value="afternoon">Afternoon (12 PM - 5 PM)</option>
                                    <option value="evening">Evening (5 PM - 8 PM)</option>
                                    <option value="anytime">Anytime</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Guest Submit Button -->
                <button type="button" id="guestSubmitBtn"
                    class="w-full mt-4 py-3 bg-primary text-white rounded-lg hover:bg-darkPrimary transition font-medium">
                    <i class="fas fa-paper-plane mr-2"></i>Send Message
                </button>
            </div>

            <!-- Success Message (hidden by default) -->
            <div id="successMessage"
                class="hidden mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg text-center">
                âœ… Message sent successfully! We'll get back to you soon.
            </div>

            <!-- Logged-in User Contact Form -->
            <form id="contactForm" action="#" method="POST" class="space-y-4" style="display: none;">

                <!-- Subject/Service Interest -->
                <div>
                    <label class="block text-gray-600 mb-1">
                        Service Interest <span class="text-red-500">*</span>
                    </label>
                    <select name="service" required
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="">Select a service</option>
                        <option value="land-purchase">Land Purchase</option>
                        <option value="property-rental">Property Rental</option>
                        <option value="property-sale">Property Sale</option>
                        <option value="property-management">Property Management</option>
                        <option value="real-estate-consultation">Real Estate Consultation</option>
                        <option value="investment-advice">Investment Advice</option>
                        <option value="legal-documentation">Legal Documentation</option>
                        <option value="property-valuation">Property Valuation</option>
                        <option value="other">Other</option>
                    </select>
                </div>



                <!-- Budget Range (for real estate) -->
                <div>
                    <label class="block text-gray-600 mb-1">
                        Budget Range (BDT)
                    </label>
                    <select name="budget"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="">Select budget range (optional)</option>
                        <option value="under-10lac">Under 10 Lac</option>
                        <option value="10lac-25lac">10 Lac - 25 Lac</option>
                        <option value="25lac-50lac">25 Lac - 50 Lac</option>
                        <option value="50lac-1crore">50 Lac - 1 Crore</option>
                        <option value="1crore-2crore">1 Crore - 2 Crore</option>
                        <option value="above-2crore">Above 2 Crore</option>
                    </select>
                </div>

                <!-- Comments/Message -->
                <div>
                    <label class="block text-gray-600 mb-1">
                        Message/Comments <span class="text-red-500">*</span>
                    </label>
                    <textarea name="message" required rows="5"
                        placeholder="Please describe your requirements, questions, or any specific details about the property/service you're looking for..."
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-vertical"></textarea>
                </div>

                <!-- Preferred Contact Time -->
                <div>
                    <label class="block text-gray-600 mb-1">
                        Preferred Contact Time
                    </label>
                    <select name="contact_time"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="">Select preferred time (optional)</option>
                        <option value="morning">Morning (9 AM - 12 PM)</option>
                        <option value="afternoon">Afternoon (12 PM - 5 PM)</option>
                        <option value="evening">Evening (5 PM - 8 PM)</option>
                        <option value="anytime">Anytime</option>
                    </select>
                </div>

                <!-- Submit -->
                <button type="submit"
                    class="w-full py-3 bg-primary text-white rounded-lg hover:bg-darkPrimary transition font-medium">
                    <i class="fas fa-paper-plane mr-2"></i>Send Message
                </button>
            </form>

            <!-- Contact Information -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-gray-700 mb-4 text-center">Get in Touch</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div class="flex items-center">
                        <i class="fas fa-phone text-primary mr-3"></i>
                        <span class="text-gray-600">+8801712757397 / +8801732370479</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-envelope text-primary mr-3"></i>
                        <span class="text-gray-600">info@one-reachbd.com</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-map-marker-alt text-primary mr-3"></i>
                        <span class="text-gray-600">44, Tatipara, Zindabazar, Sylhet</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-clock text-primary mr-3"></i>
                        <span class="text-gray-600">9 AM - 8 PM (Daily)</span>
                    </div>
                </div>
            </div>

            <p class="text-sm text-gray-600 text-center mt-6">
                Need to create an account?
                <a href="register.html" class="text-primary font-medium hover:underline">Register Here</a>
            </p>
        </div>
    </main>

    <script>
        // Initialize AOS if available
        if (typeof AOS !== 'undefined') {
            AOS.init();
        }

        // Load user data from localStorage
        function loadUserData() {
            try {
                const savedUser = JSON.parse(localStorage.getItem('userData'));
                if (savedUser) {
                    // Show logged-in user interface
                    document.getElementById('userAvatar').src = savedUser.profile;
                    document.getElementById('userName').textContent = savedUser.name;
                    document.getElementById('userEmail').textContent = savedUser.email;
                    document.getElementById('userPhone').textContent = savedUser.phone;
                    document.getElementById('userLocation').textContent = `${savedUser.area}, ${savedUser.district}, ${savedUser.division}`;

                    // Show logged-in user sections
                    document.getElementById('userInfo').style.display = 'block';
                    document.getElementById('contactForm').style.display = 'block';
                    document.getElementById('guestUserSection').style.display = 'none';
                } else {
                    // Show guest user interface
                    document.getElementById('userInfo').style.display = 'none';
                    document.getElementById('contactForm').style.display = 'none';
                    document.getElementById('guestUserSection').style.display = 'block';
                }
            } catch (error) {
                console.log('No user data found');
                // Show guest user interface
                document.getElementById('userInfo').style.display = 'none';
                document.getElementById('contactForm').style.display = 'none';
                document.getElementById('guestUserSection').style.display = 'block';
            }
        }

        // Handle guest user form submission
        function handleGuestSubmission() {
            const guestData = {
                // User registration data
                name: document.getElementById('guestName').value,
                email: document.getElementById('guestEmail').value,
                phone: document.getElementById('guestPhone').value,
                date: document.getElementById('guestDate').value,
                division: document.getElementById('guestDivision').value,
                district: document.getElementById('guestDistrict').value,
                area: document.getElementById('guestArea').value,

                // Contact form data
                service: document.getElementById('guestService').value,
                budget: document.getElementById('guestBudget').value || null,
                message: document.getElementById('guestMessage').value,
                contact_time: document.getElementById('guestContactTime').value || null,

                // Metadata
                user_id: null,
                profile: null,
                submitted_at: new Date().toISOString(),
                page_source: 'contact_form_guest'
            };

            return guestData;
        }

        // Validate guest form
        function validateGuestForm() {
            const requiredFields = [
                'guestName', 'guestEmail', 'guestPhone', 'guestDate',
                'guestDivision', 'guestDistrict', 'guestArea',
                'guestService', 'guestMessage'
            ];

            for (let fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    field.focus();
                    if (typeof Toastify !== 'undefined') {
                        Toastify({
                            text: "Please fill in all required fields",
                            duration: 3000,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "#ef4444",
                        }).showToast();
                    }
                    return false;
                }
            }

            // Email validation
            const email = document.getElementById('guestEmail').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('guestEmail').focus();
                if (typeof Toastify !== 'undefined') {
                    Toastify({
                        text: "Please enter a valid email address",
                        duration: 3000,
                        gravity: "top",
                        position: "right",
                        backgroundColor: "#ef4444",
                    }).showToast();
                }
                return false;
            }

            return true;
        }

        // Send contact data to server
        async function sendContactData(contactData) {
            try {
                const response = await fetch('https://onereachservices.com/conact_form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(contactData)
                });

                if (response.ok) {
                    const result = await response.json();

                    // Show success message
                    const successMessage = document.getElementById('successMessage');
                    successMessage.classList.remove('hidden');

                    // Scroll to top to show message
                    window.scrollTo({ top: 0, behavior: 'smooth' });

                    // Show toast notification
                    if (typeof Toastify !== 'undefined') {
                        Toastify({
                            text: "Message sent successfully! We'll contact you soon.",
                            duration: 3000,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "#10b981",
                        }).showToast();
                    }

                    return true;
                } else {
                    throw new Error(`Server error: ${response.status}`);
                }
            } catch (error) {
                console.error('Error sending contact form:', error);

                if (typeof Toastify !== 'undefined') {
                    Toastify({
                        text: "Failed to send message. Please try again later.",
                        duration: 3000,
                        gravity: "top",
                        position: "right",
                        backgroundColor: "#ef4444",
                    }).showToast();
                } else {
                    alert('Failed to send message. Please try again later.');
                }
                return false;
            }
        }

        // Load user data when page loads
        document.addEventListener('DOMContentLoaded', loadUserData);

        // Handle guest form submission
        document.getElementById('guestSubmitBtn').addEventListener('click', async function (e) {
            e.preventDefault();

            // Validate form
            if (!validateGuestForm()) {
                return;
            }

            // Show loading state
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
            this.disabled = true;

            try {
                const guestData = handleGuestSubmission();
                const success = await sendContactData(guestData);

                if (success) {
                    // Clear guest form after successful submission
                    setTimeout(() => {
                        document.querySelectorAll('#guestUserSection input, #guestUserSection select, #guestUserSection textarea').forEach(field => {
                            field.value = '';
                        });
                        document.getElementById('successMessage').classList.add('hidden');
                    }, 3000);
                }
            } finally {
                // Restore button state
                this.innerHTML = originalText;
                this.disabled = false;
            }
        });

        // Handle logged-in user form submission
        document.getElementById('contactForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            // Get user data from localStorage
            const savedUser = JSON.parse(localStorage.getItem('userData')) || {};

            // Get form data
            const formData = new FormData(this);

            // Prepare data to send
            const contactData = {
                // User information from localStorage
                user_id: savedUser.id || null,
                name: savedUser.name || 'Unknown',
                email: savedUser.email || 'unknown@example.com',
                phone: savedUser.phone || 'Not provided',
                division: savedUser.division || 'Not specified',
                district: savedUser.district || 'Not specified',
                area: savedUser.area || 'Not specified',
                profile: savedUser.profile || null,
                date_of_birth: savedUser.date || null,

                // Form data
                service: formData.get('service'),
                budget: formData.get('budget') || null,
                message: formData.get('message'),
                contact_time: formData.get('contact_time') || null,

                // Additional metadata
                submitted_at: new Date().toISOString(),
                page_source: 'contact_form_logged_in'
            };

            // Show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
            submitBtn.disabled = true;

            try {
                const success = await sendContactData(contactData);

                if (success) {
                    // Reset form after successful submission
                    setTimeout(() => {
                        this.reset();
                        document.getElementById('successMessage').classList.add('hidden');
                    }, 3000);
                }
            } finally {
                // Restore button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });

        // Initialize Feather icons if available
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
    </script>
</body>

</html>